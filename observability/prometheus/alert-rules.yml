groups:
- name: llm_apm_burn_rate_alerts
  rules:

  # -----------------------------------
  # FAST BURN â†’ PAGE
  # -----------------------------------
  - alert: LLMHighErrorBurnRateFast
    expr: |
      (
        sum(rate(http_request_errors_total[5m]))
        /
        sum(rate(http_requests_total[5m]))
      ) / 0.01
      > 14.4
    for: 2m
    labels:
      severity: critical
      service: llm-apm
    annotations:
      summary: "ğŸ”¥ LLM error budget burning FAST"
      description: |
        Error budget burn rate > 14.4x.
        Budget will be exhausted in ~2 days if this continues.

  # -----------------------------------
  # SLOW BURN â†’ TICKET
  # -----------------------------------
  - alert: LLMHighErrorBurnRateSlow
    expr: |
      (
        sum(rate(http_request_errors_total[30m]))
        /
        sum(rate(http_requests_total[30m]))
      ) / 0.01
      > 6
    for: 15m
    labels:
      severity: warning
      service: llm-apm
    annotations:
      summary: "âš ï¸ LLM error budget burning slowly"
      description: |
        Error budget burn rate > 6x.
        Budget will be exhausted in ~5 days.
